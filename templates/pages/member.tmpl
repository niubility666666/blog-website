<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{block "title" .}} - 技术社区{{end}}</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/static/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/static/icons/favicon-16x16.png">
  <link rel="stylesheet" href="/static/css/app.css">
</head>
<body class="dark-theme">
{{template "header" .}}

<main>
   <div class="container member-page">
     <div class="main-content">
       <div class="content">
         <div class="card">
           <div class="card-header">
             <div class="card-title">用户列表</div>
           </div>

           <div class="member-grid">
             {{range .users}}
             <div class="member-card">
               <div class="member-avatar">
                 <img src="{{.Avatar}}" alt="{{.Name}}" class="member-avatar-img">
               </div>
               <div class="member-info">
                 <div class="member-info-item">
                   <h3 class="member-name">{{.Name}}</h3>
                 </div>
                 <div class="member-info-item">
                   <p class="join-time">加入时间: {{.TimeAgo}}</p>
                 </div>

                 <div class="member-info-item">
                   <div class="member-stats">
                     <div class="stat-item">
                       <span class="stat-label">等级</span>
                       <span class="stat-value">{{.Level}}</span>
                     </div>
                     <div class="stat-item">
                       <span class="stat-label">帖子</span>
                       <span class="stat-value">0</span>
                     </div>
                     <div class="stat-item">
                       <span class="stat-label">评论</span>
                       <span class="stat-value">0</span>
                     </div>
                     <div class="stat-item">
                       <span class="stat-label">关注</span>
                       <span class="stat-value">0</span>
                     </div>
                     <div class="stat-item">
                       <span class="stat-label">粉丝</span>
                       <span class="stat-value">0</span>
                     </div>
                   </div>
                 </div>
               </div>

               <div class="member-actions">
                 <button class="btn btn-follow">关注</button>
                 <button class="btn btn-message">私信</button>
               </div>
             </div>
             {{else}}
             <div class="no-users">暂无用户</div>
             {{end}}
           </div>

           <!-- 分页部分保持不变 -->
           <div class="pagination">
             {{if .hasPrev}}
             <a href="?page={{.prevPage}}&q={{.searchKeyword}}" class="page-link">‹</a>
             {{else}}
             <a class="page-link disabled">‹</a>
             {{end}}

             {{$currentPage := .currentPage}}
             {{$totalPages := .totalPages}}

             {{if gt $currentPage 5}}
             <a href="?page=1&q={{.searchKeyword}}" class="page-link">1</a>
             {{if gt $currentPage 6}}<span class="page-ellipsis">...</span>{{end}}
             {{end}}

             {{$start := sub $currentPage 4}}
             {{$end := add $currentPage 4}}

             {{if le $start 0}}{{$start = 1}}{{end}}
             {{if gt $end $totalPages}}{{$end = $totalPages}}{{end}}

             {{range loop $start $end}}
             {{if eq . $currentPage}}
             <a class="page-link active">{{.}}</a>
             {{else}}
             <a href="?page={{.}}&q={{.searchKeyword}}" class="page-link">{{.}}</a>
             {{end}}
             {{end}}

             {{if lt $currentPage (sub $totalPages 4)}}
             {{if lt $currentPage (sub $totalPages 5)}}<span class="page-ellipsis">...</span>{{end}}
             <a href="?page={{$totalPages}}&q={{.searchKeyword}}" class="page-link">{{$totalPages}}</a>
             {{end}}

             {{if .hasNext}}
             <a href="?page={{.nextPage}}&q={{.searchKeyword}}" class="page-link">›</a>
             {{else}}
             <a class="page-link disabled">›</a>
             {{end}}
           </div>
         </div>
       </div>

     </div>
   </div>
</main>

{{template "footer" .}}

<script src="/static/js/app.js"></script>
</body>
</html>